#include "ClipAnalysisUtils.h"
#include "GetBpmFromOdf.h"

#include <catch2/catch.hpp>

namespace
{
// Nothing else matters, two bars of the introductory riff.
constexpr auto playDur = 5.075;
const std::vector<double> odf = {
   0.0592116,  0.0368057,  0.0118619,  0.00713629, 0.00688765, 0.00749884,
   0.00594557, 0.00364093, 0.00609268, 0.0030691,  0.00471843, 0.00963024,
   0.0110642,  0.00843918, 0.00483536, 0.00489409, 0.00491847, 0.00446826,
   0.00525965, 0.00384075, 0.00397104, 0.0199283,  0.0257986,  0.0109135,
   0.0161345,  0.0136978,  0.0112196,  0.0130777,  0.00574548, 0.00976361,
   0.008504,   0.0140315,  0.0438434,  0.01883,    0.0149668,  0.015639,
   0.0121092,  0.015423,   0.01394,    0.0125771,  0.011362,   0.00618227,
   0.00963938, 0.0338254,  0.0232921,  0.0165231,  0.0141583,  0.0112063,
   0.00876422, 0.0128253,  0.0106267,  0.0134456,  0.0141509,  0.0165383,
   0.0528113,  0.0168823,  0.0168154,  0.011857,   0.0138141,  0.0106778,
   0.0123727,  0.0108503,  0.00917571, 0.0284215,  0.0795517,  0.0408803,
   0.0184968,  0.0148115,  0.0122303,  0.0107282,  0.00981307, 0.00794695,
   0.00773232, 0.00786283, 0.010179,   0.0185274,  0.0118851,  0.0123312,
   0.00888367, 0.0103451,  0.00876566, 0.00808055, 0.00649639, 0.00576739,
   0.00505951, 0.0233998,  0.027658,   0.0122533,  0.00988819, 0.00686025,
   0.00961066, 0.00918073, 0.0068535,  0.00674812, 0.00902702, 0.00558276,
   0.0337403,  0.0266758,  0.0217005,  0.0201223,  0.0177159,  0.0135496,
   0.0133415,  0.014189,   0.0124369,  0.0119417,  0.0103729,  0.0531878,
   0.0288933,  0.0183242,  0.0181038,  0.0173096,  0.0145352,  0.00973059,
   0.0164872,  0.0147812,  0.0159889,  0.0375471,  0.0440894,  0.0164112,
   0.018136,   0.0172117,  0.011541,   0.0112245,  0.0105222,  0.0116389,
   0.00875201, 0.0107586
};
} // namespace

TEST_CASE("GetBpmFromOdf")
{
   const auto result = ClipAnalysis::GetBpmFromOdf(odf, playDur);
}
